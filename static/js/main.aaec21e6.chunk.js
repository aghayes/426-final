(this["webpackJsonpgame-client"]=this["webpackJsonpgame-client"]||[]).push([[0],{15:function(t,e,s){},18:function(t,e,s){"use strict";s.r(e);var a=s(2),n=s.n(a),r=s(10),i=s.n(r),o=(s(15),function(t){t&&t instanceof Function&&s.e(3).then(s.bind(null,19)).then((function(e){var s=e.getCLS,a=e.getFID,n=e.getFCP,r=e.getLCP,i=e.getTTFB;s(t),a(t),n(t),r(t),i(t)}))}),c=s(3),l=s(4),d=s(1),u=s(6),h=s(5),b=s(7),m=s.n(b),p=s(9),j=s(0),g=function(t){Object(u.a)(s,t);var e=Object(h.a)(s);function s(t){var a;return Object(c.a)(this,s),(a=e.call(this,t)).state={size:t.size,plants:[],update:[]},a.register=a.register.bind(Object(d.a)(a)),a}return Object(l.a)(s,[{key:"register",value:function(t){var e=this.state.update;e.push(t),this.setState({update:e})}},{key:"componentDidUpdate",value:function(){console.log("tick"+this.props.tick),this.props.tick&&this.state.update.forEach((function(t){return t()}))}},{key:"componentDidMount",value:function(){for(var t=[],e=1;e<=this.state.size;e++)for(var s=1;s<=this.state.size;s++)t.push(Object(j.jsx)(v,{i:e,j:s,tick:this.register,callBack:this.props.callBack}));this.setState({plants:t})}},{key:"render",value:function(){return Object(j.jsxs)("div",{className:"garden",children:[this.state.plants,(this.state.update,"")]})}}]),s}(n.a.Component),v=function(t){Object(u.a)(s,t);var e=Object(h.a)(s);function s(t){var a;return Object(c.a)(this,s),(a=e.call(this,t)).state={i:t.i,j:t.j,growth:0,symbol:"~",currentSymbol:"~",name:null},a.dragOver=a.dragOver.bind(Object(d.a)(a)),a.drop=a.drop.bind(Object(d.a)(a)),a.tick=a.tick.bind(Object(d.a)(a)),a.onClick=a.onClick.bind(Object(d.a)(a)),a}return Object(l.a)(s,[{key:"componentDidMount",value:function(){this.props.tick(this.tick)}},{key:"onClick",value:function(){var t=Object(p.a)(m.a.mark((function t(e){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(console.log("click"),2!==this.state.growth){t.next=6;break}this.props.callBack(this.state.name,1,this.state.currentSymbol),this.setState({name:null,symbol:"~",currentSymbol:"~",growth:0}),t.next=10;break;case 6:return t.next=8,this.tick();case 8:return t.next=10,this.tick();case 10:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"dragOver",value:function(t){t.dataTransfer.types.includes("seed")&&t.preventDefault(),t.dataTransfer.dropEffect="move"}},{key:"drop",value:function(t){var e=t.dataTransfer.getData("text").split("|");console.log(e),t.preventDefault(),this.setState({name:e[0],symbol:e[1],currentSymbol:"*"})}},{key:"tick",value:function(){var t=Object(p.a)(m.a.mark((function t(){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:console.log("tick"),null!=this.state.name&&2!=this.state.growth&&(0==this.state.growth?this.setState({currentSymbol:"\ud83c\udf31",growth:1}):this.setState({currentSymbol:this.state.symbol,growth:2}));case 2:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"render",value:function(){return Object(j.jsx)("div",{className:"plant",onClick:this.onClick,onDragOver:this.dragOver,onDrop:this.drop,style:{gridArea:"".concat(this.state.i,"/").concat(this.state.j,"/").concat(this.state.i+1,"/").concat(this.state.j+1)},children:Object(j.jsx)("a",{children:this.state.currentSymbol})})}}]),s}(n.a.Component),O=g,f=function(t){Object(u.a)(s,t);var e=Object(h.a)(s);function s(t){var a;return Object(c.a)(this,s),(a=e.call(this,t)).state={items:[]},a.dragStart=a.dragStart.bind(Object(d.a)(a)),a.dragEnd=a.dragEnd.bind(Object(d.a)(a)),a}return Object(l.a)(s,[{key:"componentDidMount",value:function(){this.setState({items:this.props.items})}},{key:"componentDidUpdate",value:function(t){this.props.items!==t.items&&this.setState({items:this.props.items})}},{key:"dragStart",value:function(t){t.dataTransfer.setData("text",t.target.dataset.name+"|"+t.target.dataset.number+"|"+t.target.dataset.symbol),t.dataTransfer.setData("item","");var e=document.createElement("div");e.style.position="absolute",e.style.top="-1000px",e.innerHTML=t.target.dataset.symbol,e.id=t.target.dataset.name,document.body.appendChild(e),t.dataTransfer.setDragImage(e,0,0),t.dataTransfer.dropEffect="move"}},{key:"dragEnd",value:function(t,e){document.getElementById(t).remove(),console.log(e),"move"==e.dataTransfer.dropEffect&&this.props.removeItem(t)}},{key:"render",value:function(){var t=this;return Object(j.jsxs)("div",{className:"inventoryTotal",children:[Object(j.jsx)("a",{children:"Inventory:"}),Object(j.jsx)("div",{className:"inventory",children:this.state.items.map((function(e){return Object(j.jsx)(y,{dragEnd:t.dragEnd,dragStart:t.dragStart,name:e[0],number:e[1],symbol:e[2]})}))})]})}}]),s}(n.a.Component),y=function(t){Object(u.a)(s,t);var e=Object(h.a)(s);function s(t){var a;return Object(c.a)(this,s),(a=e.call(this,t)).state={dragStart:a.props.dragStart,dragEnd:a.props.dragEnd},a}return Object(l.a)(s,[{key:"render",value:function(){var t=this;return Object(j.jsxs)("a",{draggable:"true",onDragStart:this.state.dragStart,onDragEnd:function(e){t.state.dragEnd(t.props.name,e)},"data-name":this.props.name,"data-number":this.props.number.toString(),"data-symbol":this.props.symbol,children:[this.props.symbol,": ",this.props.number]})}}]),s}(n.a.Component),k=f,x=function(t){Object(u.a)(s,t);var e=Object(h.a)(s);function s(t){var a;return Object(c.a)(this,s),(a=e.call(this,t)).state={user:"",pass:"",sendMessage:t.sendMessage},a.userChange=a.userChange.bind(Object(d.a)(a)),a.passChange=a.passChange.bind(Object(d.a)(a)),a.login=a.login.bind(Object(d.a)(a)),a.register=a.register.bind(Object(d.a)(a)),a}return Object(l.a)(s,[{key:"userChange",value:function(t){this.setState({user:t.target.value})}},{key:"passChange",value:function(t){this.setState({pass:t.target.value})}},{key:"login",value:function(t){t.preventDefault(),this.state.sendMessage("LOGIN|".concat(this.state.user,"|").concat(this.state.pass))}},{key:"register",value:function(t){t.preventDefault(),this.state.sendMessage("REGISTER|".concat(this.state.user,"|").concat(this.state.pass))}},{key:"render",value:function(){return Object(j.jsx)("div",{children:Object(j.jsxs)("form",{children:[Object(j.jsx)("label",{children:"Username:"}),Object(j.jsx)("br",{}),Object(j.jsx)("input",{type:"text",id:"usr",value:this.state.user,onChange:this.userChange}),Object(j.jsx)("br",{}),Object(j.jsx)("label",{children:"Password:"}),Object(j.jsx)("br",{}),Object(j.jsx)("input",{type:"password",id:"pwd",value:this.state.pass,onChange:this.passChange}),Object(j.jsx)("br",{}),Object(j.jsxs)("div",{className:"buttonGroup",id:"loginGroup",children:[Object(j.jsx)("button",{className:"button left",onClick:this.login,children:"Login"}),Object(j.jsx)("button",{className:"button right",onClick:this.register,children:"Register"})]}),Object(j.jsx)("p",{children:this.props.loginPrompt})]})})}}]),s}(n.a.Component),S=function(t){Object(u.a)(s,t);var e=Object(h.a)(s);function s(t){var a;return Object(c.a)(this,s),(a=e.call(this,t)).state={name:a.props.name,symbol:a.props.symbol},a.dragStart=a.dragStart.bind(Object(d.a)(a)),a.dragEnd=a.dragEnd.bind(Object(d.a)(a)),a}return Object(l.a)(s,[{key:"dragStart",value:function(t){t.dataTransfer.setData("text",this.state.name+"|"+this.state.symbol),t.dataTransfer.setData("SEED","");var e=document.createElement("div");e.style.position="absolute",e.style.top="-1000px",e.innerHTML=this.state.symbol,e.id=this.state.name,document.body.appendChild(e),t.dataTransfer.setDragImage(e,0,0),t.dataTransfer.effectAllowed="move"}},{key:"dragEnd",value:function(t){document.getElementById(this.state.name).remove()}},{key:"render",value:function(){return Object(j.jsx)("a",{draggable:"true",className:"seed",onDragStart:this.dragStart,onDragEnd:this.dragEnd,children:this.state.symbol})}}]),s}(n.a.Component),D=function(t){Object(u.a)(s,t);var e=Object(h.a)(s);function s(t){return Object(c.a)(this,s),e.call(this,t)}return Object(l.a)(s,[{key:"render",value:function(){return Object(j.jsxs)("div",{className:"seedBoxTotal",children:[Object(j.jsx)("a",{children:"Seeds:"}),Object(j.jsxs)("div",{className:"seedBox",children:[Object(j.jsx)(S,{name:"rice",symbol:"\ud83c\udf3e"}),Object(j.jsx)(S,{name:"broccoli",symbol:"\ud83e\udd66"}),Object(j.jsx)(S,{name:"mushroom",symbol:"\ud83c\udf44"}),Object(j.jsx)(S,{name:"eggplant",symbol:"\ud83c\udf46"}),Object(j.jsx)(S,{name:"pepper",symbol:"\ud83c\udf36\ufe0f"}),Object(j.jsx)(S,{name:"herbs",symbol:"\ud83c\udf3f"}),Object(j.jsx)(S,{name:"celery",symbol:"\ud83e\udd6c"}),Object(j.jsx)(S,{name:"tulip",symbol:"\ud83c\udf37"}),Object(j.jsx)(S,{name:"sunflower",symbol:"\ud83c\udf3b"}),Object(j.jsx)(S,{name:"rose",symbol:"\ud83c\udf39"})]})]})}}]),s}(n.a.Component),C=function(t){Object(u.a)(s,t);var e=Object(h.a)(s);function s(t){var a;return Object(c.a)(this,s),(a=e.call(this,t)).state={classList:a.props.classList,has:!1},a.dragOver=a.dragOver.bind(Object(d.a)(a)),a.drop=a.drop.bind(Object(d.a)(a)),a.onClick=a.onClick.bind(Object(d.a)(a)),a}return Object(l.a)(s,[{key:"componentDidUpdate",value:function(){null===this.props.name&&this.setState({has:!1})}},{key:"onClick",value:function(t){this.props.onClick(),this.setState({has:!1})}},{key:"dragOver",value:function(t){t.dataTransfer.types.includes("item")&&0==this.state.has&&t.preventDefault(),t.dataTransfer.dropEffect="move"}},{key:"drop",value:function(t){var e=t.dataTransfer.getData("text").split("|");t.preventDefault(),this.props.giveData(e),this.setState({has:!0})}},{key:"render",value:function(){return Object(j.jsx)("div",{onClick:this.onClick,className:"slotContainer "+this.state.classList,onDragOver:this.dragOver,onDrop:this.drop,children:Object(j.jsx)("a",{children:null!==this.props.symbol?this.props.symbol:""})})}}]),s}(n.a.Component),E=function(t){Object(u.a)(s,t);var e=Object(h.a)(s);function s(t){var a;return Object(c.a)(this,s),(a=e.call(this,t)).state={name:null,number:null,symbol:null},a.getData=a.getData.bind(Object(d.a)(a)),a.onClick=a.onClick.bind(Object(d.a)(a)),a}return Object(l.a)(s,[{key:"componentDidUpdate",value:function(){this.props.update&&null!==this.state.name&&(this.props.sendMessage("SELL|"+this.state.name+"="+this.state.number),this.setState({name:null,number:null,symbol:null}))}},{key:"getData",value:function(t){this.setState({name:t[0],number:parseInt(t[1]),symbol:t[2]})}},{key:"onClick",value:function(){this.props.giveItem(this.state.name,this.state.number,this.state.symbol),this.setState({name:null,number:null,symbol:null})}},{key:"render",value:function(){return Object(j.jsxs)("div",{className:"cart "+this.props.class,children:[(this.props.update,""),Object(j.jsx)(C,{onClick:this.onClick,giveData:this.getData,classList:"cartSlot",number:this.state.number,symbol:this.state.symbol}),Object(j.jsx)("label",{children:null!==this.state.number?this.state.number:String.fromCharCode(160)})]})}}]),s}(n.a.Component),w=function(t){Object(u.a)(s,t);var e=Object(h.a)(s);function s(t){var a;return Object(c.a)(this,s),(a=e.call(this,t)).state={url:t.url,ws:null,msg:"",loginPrompt:"",login:"loggedout",items:[],connected:!1,darkmode:!1,money:0,update:!1,days:0},a.onmessage=a.onmessage.bind(Object(d.a)(a)),a.onopen=a.onopen.bind(Object(d.a)(a)),a.sendMessage=a.sendMessage.bind(Object(d.a)(a)),a.setDarkmode=a.setDarkmode.bind(Object(d.a)(a)),a.toggleDarkmode=a.toggleDarkmode.bind(Object(d.a)(a)),a.removeItem=a.removeItem.bind(Object(d.a)(a)),a.addToInventory=a.addToInventory.bind(Object(d.a)(a)),a.addMoney=a.addMoney.bind(Object(d.a)(a)),a.update=a.update.bind(Object(d.a)(a)),a}return Object(l.a)(s,[{key:"onopen",value:function(){this.setState({connected:!0})}},{key:"componentDidMount",value:function(){var t=this,e=new WebSocket(this.state.url);e.onmessage=this.onmessage,e.onopen=this.onopen,e.onclose=function(e){t.setState({msg:e.code})},this.setState({ws:e})}},{key:"componentWillUnmount",value:function(){console.log("closing"),this.state.ws.close()}},{key:"onmessage",value:function(t){console.log(t.data),this.setState({msg:t.data});var e=t.data.split("|");switch(e[0]){default:break;case"USEREXISTS":this.setState({loginPrompt:"Username already in use"});break;case"NOUSER":this.setState({loginPrompt:"No user with that name"});break;case"BADPASS":this.setState({loginPrompt:"Incorrect password"});break;case"LOGIN":this.toggleLogin();break;case"DARKMODE":this.setDarkmode(e[1]);break;case"SOLD":this.addMoney(parseInt(e[1]));break;case"TICK":this.update()}}},{key:"update",value:function(){var t=this;this.setState({update:!0,days:this.state.days+1},(function(){t.setState({update:!1})})),console.log(this.state.days)}},{key:"sendMessage",value:function(t){this.state.ws.send(t)}},{key:"toggleDarkmode",value:function(t){var e=this;this.setState({darkmode:!this.state.darkmode}),document.querySelectorAll("*").forEach((function(t){return t.classList.toggle("darkmode",e.state.darkmode)})),this.state.ws.send("DARKMODE|".concat(this.state.darkmode.toString()))}},{key:"setDarkmode",value:function(t){var e=this;switch(t){default:break;case"false":this.setState({darkmode:!1});break;case"true":this.setState({darkmode:!0})}document.querySelectorAll("*").forEach((function(t){return t.classList.toggle("darkmode",e.state.darkmode)}))}},{key:"toggleLogin",value:function(){this.setState({login:"loggedout"==this.state.login?"loggedin":"loggedout"})}},{key:"addMoney",value:function(t){this.setState({money:this.state.money+t})}},{key:"addToInventory",value:function(t,e,s){var a=!1,n=this.state.items;n.forEach((function(s){s[0]===t&&(s[1]=parseInt(s[1])+e,a=!0)})),a||n.push([t,1,s]),this.setState({items:n})}},{key:"removeItem",value:function(t,e){console.log(this.state.items.filter((function(e){return t!==e[0]}))),this.setState({items:this.state.items.filter((function(e){return t!==e[0]}))})}},{key:"render",value:function(){var t=this;return this.state.connected?Object(j.jsxs)("div",{className:"main",children:[Object(j.jsxs)("div",{className:"header",children:[Object(j.jsxs)("h3",{className:"days",children:["Day: ",this.state.days%6]}),Object(j.jsxs)("h3",{className:"money",children:["$",this.state.money]}),Object(j.jsxs)("div",{className:"buttonGroup",id:"headerGroup",children:[Object(j.jsx)("button",{className:"button left",onCLick:function(){t.toggleLogin(),t.state.ws.close(),window.location.reload()},children:"logout"}),Object(j.jsx)("button",{className:"button right dToggle",onClick:this.toggleDarkmode,children:"darkmode"})]})]}),Object(j.jsx)("div",{className:"login ".concat(this.state.login),children:Object(j.jsx)(x,{sendMessage:this.sendMessage})}),Object(j.jsxs)("div",{className:"board",children:[Object(j.jsx)("label",{className:"cartLabel",children:"Market:"}),Object(j.jsxs)("div",{className:"carts",children:[Object(j.jsx)(E,{update:this.state.update,giveItem:this.addToInventory,class:"one",sendMessage:this.sendMessage}),Object(j.jsx)(E,{update:this.state.update,giveItem:this.addToInventory,class:"two",sendMessage:this.sendMessage}),Object(j.jsx)(E,{update:this.state.update,giveItem:this.addToInventory,class:"three",sendMessage:this.sendMessage}),Object(j.jsx)(E,{update:this.state.update,giveItem:this.addToInventory,class:"four",sendMessage:this.sendMessage})]}),Object(j.jsx)(O,{tick:this.state.update,size:8,callBack:this.addToInventory})]}),Object(j.jsx)(k,{items:this.state.items,removeItem:this.removeItem}),Object(j.jsx)(D,{})]}):Object(j.jsx)("div",{children:Object(j.jsx)("a",{children:"Connecting..."})})}}]),s}(n.a.Component);i.a.render(Object(j.jsx)(n.a.StrictMode,{children:Object(j.jsx)(w,{url:"ws://"+window.location.hostname+":3030/connect"})}),document.getElementById("root")),o()}},[[18,1,2]]]);
//# sourceMappingURL=main.aaec21e6.chunk.js.map